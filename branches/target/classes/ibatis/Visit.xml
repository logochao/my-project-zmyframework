<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sqlMap      
    PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN"      
    "http://ibatis.apache.org/dtd/sql-map-2.dtd">

<sqlMap>
	<typeAlias alias="Visit" type="com.wendellup.app.valueobject.entity.Visit"/>
	
	<select id="findVisitTimes" parameterClass="Visit"  
        resultClass="int">  
        select count(*) from VISIT 
        <dynamic prepend="WHERE">  
            <isNotEmpty prepend="AND" property="ip">  
                IP = #ip#  
            </isNotEmpty>  
            <isNotEmpty prepend="AND" property="time">  
				TO_DAYS(TIME) = TO_DAYS(#time#) 
            </isNotEmpty>  
            <isNotEmpty prepend="AND" property="url">  
                URL = #url#  
            </isNotEmpty> 
        </dynamic>  
    </select>  
	
	<insert id="insert" parameterClass="Visit">
		insert into VISIT (IP,TIME,URL)  
		 values (#ip#,#time#,#url#);
	</insert>
	
</sqlMap>